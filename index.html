<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>1 Coast Media — Premium Digital, Media & Event Services</title>
  <meta name="description" content="Premium Web & App, Video/Audio Production, Event Planning, and UGC Campaigns for Mississippi Gulf Coast creators and brands. Transparent pricing. Fast turnarounds. Results-driven."/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Alpine.js -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    :root{
      --ink:#0b1220; --indigo:#4f46e5; --cyan:#06b6d4; --emerald:#10b981; --ring: rgba(15, 23, 42, 0.12);
    }
    html{scroll-behavior:smooth}
    body{font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    .mesh{background-image:
      radial-gradient(70rem 35rem at -10% -10%, rgba(79,70,229,.14), transparent 60%),
      radial-gradient(60rem 30rem at 110% 10%, rgba(6,182,212,.12), transparent 60%),
      radial-gradient(36rem 22rem at 60% 120%, rgba(16,185,129,.10), transparent 60%),
      linear-gradient(#f8fafc, #ffffff 28%, #f1f5f9)}
    .glass{backdrop-filter:saturate(170%) blur(14px);background:rgba(255,255,255,.84)}
    .halo{position:relative;border-radius:1.25rem}
    .halo:before{content:"";position:absolute;inset:-1px;border-radius:inherit;background:linear-gradient(120deg, rgba(2,6,23,.08), rgba(79,70,229,.32), rgba(6,182,212,.32), rgba(2,6,23,.08));-webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask-composite:exclude;padding:1px;pointer-events:none}
    .btn{transition:transform .2s ease, box-shadow .2s ease}
    .btn:hover{transform:translateY(-1px)}
    .tap:active{transform:scale(.98)}
    .chev{transition: transform .2s ease}
    .f-ring:focus-visible{outline:none;box-shadow:0 0 0 4px rgba(79,70,229,.18)}
    .toast-enter{transform:translateY(8px);opacity:0}
    .toast-enter-active{transform:translateY(0);opacity:1;transition:.18s ease-out}
    .spinner{border:3px solid #e2e8f0;border-top-color:#0f172a;border-radius:999px;width:18px;height:18px;animation:spin .8s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
  </style>
</head>
<body class="mesh text-slate-800" x-data="landingApp()" x-init="init()">
  <!-- NAV -->
  <header class="sticky top-0 z-50 backdrop-blur bg-white/80 border-b border-slate-200/70">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <a href="#top" class="inline-flex items-center gap-2">
        <span class="inline-grid place-items-center h-9 w-9 rounded-xl bg-white ring-1 ring-slate-200">
          <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-700" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2l3 6 6 .9-4.5 4.4 1 6.3L12 17l-5.5 2.6 1-6.3L3 8.9 9 8z"/></svg>
        </span>
        <span class="font-extrabold tracking-tight">1 Coast Media</span>
      </a>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#services" class="hover:text-slate-900 text-slate-600 f-ring">Base Services</a>
        <button @click="openAddons('web')" class="hover:text-slate-900 text-slate-600 f-ring">Explore Add-Ons</button>
        <a href="#faq" class="hover:text-slate-900 text-slate-600 f-ring">FAQ</a>
        <a href="#contact" class="hover:text-slate-900 text-slate-600 f-ring">Contact</a>
        <button @click="openBuilder()" class="tap btn inline-flex items-center gap-2 rounded-xl bg-slate-900 text-white px-3 py-2 font-semibold shadow-sm hover:shadow-lg">Build Your Package</button>
      </nav>
      <button @click="openBuilder()" class="md:hidden inline-flex items-center justify-center h-10 px-3 rounded-lg bg-slate-900 text-white text-sm font-semibold">Build</button>
    </div>
  </header>

  <!-- HERO -->
  <section id="top" class="relative">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16 md:py-20 grid lg:grid-cols-2 gap-12 items-center">
      <div>
        <h1 class="text-5xl font-black leading-tight tracking-tight">Gulf Coast Growth, <span class="bg-gradient-to-r from-slate-900 via-blue-600 to-indigo-500 bg-clip-text text-transparent">On Demand</span></h1>
        <p class="mt-4 text-slate-600 max-w-prose">Pick a base service, stack add-ons, or build from scratch. One-time for quick wins, monthly for momentum.</p>
        <div class="mt-8 flex flex-wrap items-center gap-3">
          <a href="#services" class="tap btn inline-flex items-center gap-2 rounded-xl bg-slate-900 text-white px-5 py-3 font-semibold shadow-sm hover:shadow-lg">See Base Services</a>
          <button @click="openAddons('web')" class="tap btn inline-flex items-center gap-2 rounded-xl ring-1 ring-slate-200 bg-white px-5 py-3 font-semibold hover:bg-slate-50">Explore Add-Ons</button>
        </div>
        <div class="mt-6 text-xs text-slate-500">Email <a class="underline" href="mailto:1coastmedia@gmail.com">1coastmedia@gmail.com</a> • Free 30-min call <a class="underline" href="https://calendly.com/bdaniels013/30min" target="_blank" rel="noreferrer">here</a>.</div>
      </div>
      <div class="relative">
        <div class="halo p-0.5">
          <div class="rounded-[1.25rem] bg-white ring-1 ring-slate-200 p-6 shadow-sm">
            <div class="grid sm:grid-cols-3 gap-4 w-full">
              <div class="rounded-xl bg-slate-50 ring-1 ring-slate-200 p-4"><div class="text-3xl font-black text-slate-900">3-7d</div><div class="text-xs text-slate-500">Website turnarounds</div></div>
              <div class="rounded-xl bg-slate-50 ring-1 ring-slate-200 p-4"><div class="text-3xl font-black text-slate-900">30k+</div><div class="text-xs text-slate-500">UGC views/campaign</div></div>
              <div class="rounded-xl bg-slate-50 ring-1 ring-slate-200 p-4"><div class="text-3xl font-black text-slate-900">100%</div><div class="text-xs text-slate-500">Transparent pricing</div></div>
            </div>
            <p class="mt-4 text-sm text-slate-600">Built for creators, real estate, tourism & local brands.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- PLAN TOGGLE -->
  <section class="pt-2">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between gap-3">
        <div class="text-sm text-slate-600">Plan</div>
        <div class="inline-flex rounded-lg bg-slate-100 p-1">
          <button @click="setPlan('oneTime')" :class="plan==='oneTime' ? 'bg-white text-slate-900' : 'text-slate-700'" class="px-3 py-1 rounded-md text-sm font-semibold f-ring">One-time</button>
          <button @click="setPlan('monthly')" :class="plan==='monthly' ? 'bg-white text-slate-900' : 'text-slate-700'" class="px-3 py-1 rounded-md text-sm font-semibold f-ring">Monthly</button>
        </div>
      </div>
    </div>
  </section>

  <!-- BASE SERVICES -->
  <section id="services" class="py-10">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex items-end justify-between gap-4">
        <div>
          <h2 class="text-3xl font-extrabold tracking-tight">Base Services</h2>
          <p class="mt-2 text-slate-600">Start with a base. Add add-ons anywhere. <span class="text-slate-500">(Checkout requires at least one base.)</span></p>
        </div>
        <button @click="openAddons(activeService)" class="hidden sm:inline-flex tap btn items-center gap-2 rounded-xl bg-slate-900 text-white px-4 py-3 font-semibold shadow-sm hover:shadow-lg">Explore Add-Ons</button>
      </div>

      <div class="mt-6 grid md:grid-cols-2 lg:grid-cols-4 gap-6">
        <template x-for="svc in services" :key="'svc-'+svc.key">
          <div class="halo p-0.5">
            <div class="relative rounded-3xl bg-white ring-1 ring-slate-200 p-6 shadow-sm hover:shadow-xl transition">
              <div class="absolute -top-1 left-6 inline-flex gap-2">
                <span class="text-[11px] uppercase tracking-wide rounded bg-slate-100 ring-1 ring-slate-200 px-2 py-0.5" x-text="plan==='oneTime' ? 'One-time' : 'Monthly'"></span>
              </div>
              <div class="flex items-start justify-between gap-3 mt-3">
                <div>
                  <h3 class="text-xl font-bold" x-text="svc.name"></h3>
                  <p class="text-sm text-slate-600 mt-1" x-text="svc.blurb"></p>
                </div>
                <div class="text-right">
                  <div class="text-xs text-slate-500">Base</div>
                  <div class="text-2xl font-extrabold text-slate-900" x-text="fmtUSD(svc.base[plan])"></div>
                </div>
              </div>
              <ul class="mt-3 text-sm text-slate-700 space-y-1">
                <template x-for="it in svc.includes" :key="it"><li class="flex gap-2"><span>•</span><span x-text="it"></span></li></template>
              </ul>
              <div class="mt-5 grid grid-cols-2 gap-2">
                <button @click="toggleService(svc.key)" class="tap rounded-lg px-3 py-2 text-sm font-semibold f-ring" :class="cartServices.includes(svc.key) ? 'bg-emerald-600 text-white' : 'bg-slate-900 text-white'" x-text="cartServices.includes(svc.key) ? 'Added' : 'Add Base'"></button>
                <button @click="activeService=svc.key; openAddons(svc.key)" class="tap rounded-lg ring-1 ring-slate-200 bg-white px-3 py-2 text-sm font-semibold f-ring">Add-Ons</button>
              </div>
            </div>
          </div>
        </template>
      </div>
    </div>
  </section>

  <!-- Summary bar -->
  <section class="py-6">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="rounded-2xl bg-white ring-1 ring-slate-200 p-4 flex items-center justify-between gap-3">
        <div class="text-sm text-slate-600">Selected: <strong x-text="cartServices.length"></strong> base • <strong x-text="cartAddons.length"></strong> add-ons</div>
        <div class="text-sm text-slate-600">Est. total: <strong x-text="fmtUSD(total)"></strong><span class="text-slate-500" x-show="plan==='monthly'">/mo</span></div>
        <div class="flex gap-2">
          <button @click="openAddons(activeService)" class="tap rounded-lg ring-1 ring-slate-200 bg-white px-3 py-2 text-sm font-semibold f-ring">Explore Add-Ons</button>
          <button @click="openBuilder()" class="tap rounded-lg bg-slate-900 text-white px-3 py-2 text-sm font-semibold f-ring">Review & Checkout</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Toast -->
  <div x-show="toast.show" x-transition.opacity class="fixed bottom-4 left-1/2 -translate-x-1/2 z-50">
    <div class="toast-enter-active rounded-xl bg-slate-900 text-white px-4 py-3 shadow-lg ring-1 ring-black/10">
      <span x-text="toast.text"></span>
    </div>
  </div>

  <!-- FAQ -->
  <section id="faq" class="py-14 bg-white/60 border-y border-slate-200">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <h3 class="text-2xl font-extrabold">FAQ</h3>
      <div class="mt-4 grid md:grid-cols-2 gap-3">
        <div class="rounded-xl bg-white ring-1 ring-slate-200 p-4" x-data="{open:false}">
          <button @click="open=!open" class="w-full flex items-center justify-between text-left f-ring"><span class="font-semibold">How quickly can we start?</span><svg :class="{'rotate-180':open}" class="h-5 w-5 transition" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></button>
          <div x-show="open" x-transition class="overflow-hidden"><p class="mt-3 text-slate-600">Kick off in ~48 hours. One-time sites in 3–7 days; monthly starts this week.</p></div>
        </div>
        <div class="rounded-xl bg-white ring-1 ring-slate-200 p-4" x-data="{open:false}">
          <button @click="open=!open" class="w-full flex items-center justify-between text-left f-ring"><span class="font-semibold">Can I pick add-ons without a base?</span><svg :class="{'rotate-180':open}" class="h-5 w-5 transition" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></button>
          <div x-show="open" x-transition class="overflow-hidden"><p class="mt-3 text-slate-600">Yes for browsing; for checkout, add at least one base so Stripe can itemize correctly.</p></div>
        </div>
        <div class="rounded-xl bg-white ring-1 ring-slate-200 p-4" x-data="{open:false}">
          <button @click="open=!open" class="w-full flex items-center justify-between text-left f-ring"><span class="font-semibold">Do you travel for shoots?</span><svg :class="{'rotate-180':open}" class="h-5 w-5 transition" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></button>
          <div x-show="open" x-transition class="overflow-hidden"><p class="mt-3 text-slate-600">Yes. We’re Gulf Coast based with travel options for video and events.</p></div>
        </div>
        <div class="rounded-xl bg-white ring-1 ring-slate-200 p-4" x-data="{open:false}">
          <button @click="open=!open" class="w-full flex items-center justify-between text-left f-ring"><span class="font-semibold">Is there a contract?</span><svg :class="{'rotate-180':open}" class="h-5 w-5 transition" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></button>
          <div x-show="open" x-transition class="overflow-hidden"><p class="mt-3 text-slate-600">One-time = clear scope. Monthly = simple 3-month minimum to build momentum.</p></div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="py-16">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 grid lg:grid-cols-2 gap-10 items-start">
      <div>
        <h2 class="text-3xl font-extrabold tracking-tight">Ready to transform your brand?</h2>
        <p class="mt-3 text-slate-600 max-w-prose">Prefer to chat first? Book a free call or email us anytime.</p>
        <div class="mt-6 space-x-3 text-sm">
          <a href="mailto:1coastmedia@gmail.com?subject=1%20Coast%20Media%20Inquiry" class="tap inline-flex items-center gap-2 rounded-xl bg-slate-900 text-white px-4 py-3 font-semibold shadow-sm hover:shadow-lg">Email Us</a>
          <a href="https://calendly.com/bdaniels013/30min" target="_blank" rel="noreferrer" class="tap inline-flex items-center gap-2 rounded-xl ring-1 ring-slate-200 bg-white px-4 py-3 font-semibold hover:bg-slate-50">Open Calendly</a>
        </div>
      </div>
      <div class="halo p-0.5 w-full">
        <div class="rounded-3xl glass ring-1 ring-slate-200 p-2 w-full">
          <iframe title="Calendly" src="https://calendly.com/bdaniels013/30min?hide_event_type_details=1&text_color=0F172A&primary_color=0F172A" class="w-full rounded-2xl" style="min-height:660px"></iframe>
        </div>
      </div>
    </div>
  </section>

  <footer class="py-10 border-t border-slate-200 text-center text-xs text-slate-500">© <span x-text="year"></span> 1 Coast Media • Mississippi Gulf Coast • All rights reserved.</footer>

  <!-- Mobile sticky CTA -->
  <div class="md:hidden fixed bottom-4 left-4 right-4 z-40" x-show="stickyCta" x-transition>
    <div class="rounded-2xl bg-slate-900 text-white shadow-xl px-4 py-3 ring-1 ring-black/5 flex items-center justify-between">
      <div>
        <div class="text-xs text-white/80">Ready when you are</div>
        <div class="text-lg font-extrabold">Build your package</div>
      </div>
      <button @click="openBuilder()" class="rounded-xl bg-white text-slate-900 px-4 py-2 font-semibold">Start</button>
    </div>
  </div>

  <!-- Explore Add-Ons (global) -->
  <div x-show="addonsOpen" x-transition.opacity class="fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4">
    <div @click="addonsOpen=false" class="absolute inset-0 bg-slate-900/50"></div>
    <div class="relative w-full sm:max-w-6xl rounded-2xl bg-white text-slate-900 shadow-2xl ring-1 ring-slate-200 max-h-[92vh] overflow-hidden">
      <div class="p-5 border-b border-slate-200 flex items-center justify-between">
        <h3 class="text-lg font-bold">Explore Add-Ons</h3>
        <button @click="addonsOpen=false" class="h-9 w-9 grid place-items-center rounded-md hover:bg-slate-50 f-ring" aria-label="Close"><svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 6l12 12M6 18L18 6"/></svg></button>
      </div>
      <div class="p-5 grid lg:grid-cols-4 gap-4 overflow-auto max-h-[calc(92vh-72px)]">
        <!-- Filters -->
        <aside class="lg:col-span-1 space-y-3">
          <div class="rounded-xl bg-slate-50 ring-1 ring-slate-200 p-3">
            <label class="text-xs text-slate-500">Service</label>
            <select x-model="activeService" class="mt-1 w-full rounded-lg bg-white ring-1 ring-slate-200 px-2 py-2 text-sm f-ring">
              <template x-for="s in services" :key="'sel-'+s.key"><option :value="s.key" x-text="s.name"></option></template>
            </select>
          </div>
          <div class="rounded-xl bg-slate-50 ring-1 ring-slate-200 p-3">
            <label class="text-xs text-slate-500">Search add-ons</label>
            <input x-model.trim="addonQuery" placeholder="e.g., SEO, drone, captions" class="mt-1 w-full rounded-lg bg-white ring-1 ring-slate-200 px-2 py-2 text-sm f-ring" />
          </div>
          <div class="rounded-xl bg-slate-50 ring-1 ring-slate-200 p-3">
            <label class="text-xs text-slate-500">Sort</label>
            <select x-model="sortBy" class="mt-1 w-full rounded-lg bg-white ring-1 ring-slate-200 px-2 py-2 text-sm f-ring">
              <option value="popular">Popular</option>
              <option value="price-asc">Price ↑</option>
              <option value="price-desc">Price ↓</option>
              <option value="alpha">A–Z</option>
            </select>
          </div>
          <div class="rounded-xl bg-slate-50 ring-1 ring-slate-200 p-3">
            <div class="text-xs text-slate-500">Quick picks</div>
            <div class="mt-2 grid grid-cols-2 gap-2">
              <button @click="quickPick('essentials')" class="rounded-lg bg-white ring-1 ring-slate-200 px-2 py-1 text-xs font-semibold">Essentials</button>
              <button @click="quickPick('premium')" class="rounded-lg bg-white ring-1 ring-slate-200 px-2 py-1 text-xs font-semibold">Premium</button>
            </div>
          </div>
        </aside>
        
        <!-- Add-on list -->
        <div class="lg:col-span-3">
          <div class="flex items-center justify-between gap-2 flex-wrap">
            <div class="text-sm text-slate-600">Selected add-ons: <strong x-text="cartAddons.length"></strong></div>
            <div class="text-sm text-slate-600">Est. total: <strong x-text="fmtUSD(total)"></strong><span class="text-slate-500" x-show="plan==='monthly'">/mo</span></div>
          </div>
          <div class="mt-3 divide-y divide-slate-200 ring-1 ring-slate-200 rounded-xl overflow-hidden max-h-[60vh] overflow-auto pr-1 bg-white">
            <template x-for="ad in visibleAddons" :key="ad.id">
              <div>
                <div class="flex items-center justify-between p-3">
                  <div class="min-w-0">
                    <div class="font-medium truncate" x-text="ad.label"></div>
                    <div class="text-[11px] text-slate-500 mt-0.5 inline-flex items-center gap-2">
                      <span class="rounded-full bg-slate-100 ring-1 ring-slate-200 px-2 py-0.5 uppercase tracking-wide" x-text="ad.badge"></span>
                      <span x-show="ad.popular" class="rounded-full bg-indigo-50 text-indigo-700 ring-1 ring-indigo-200 px-2 py-0.5">Popular</span>
                    </div>
                  </div>
                  <div class="flex items-center gap-3">
                    <div class="text-sm font-semibold whitespace-nowrap" x-text="fmtUSD(ad.price[plan])"></div>
                    <button @click="toggleAddon(ad.id)" class="tap rounded-md px-2 py-1 text-xs font-semibold f-ring" :class="cartAddons.includes(ad.id)?'bg-emerald-600 text-white':'ring-1 ring-slate-200'" x-text="cartAddons.includes(ad.id)?'Added':'Add'"></button>
                  </div>
                </div>
                <button @click="toggleDesc(ad.id)" class="w-full text-left px-3 pb-3 text-xs text-slate-500 flex items-center gap-1 f-ring"><span class="underline">Details</span><svg class="h-3 w-3 chev" :class="{ 'rotate-180': openDescs[ad.id] }" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 9l6 6 6-6"/></svg></button>
                <div class="px-3 pb-3 text-sm text-slate-600" x-show="openDescs[ad.id]" x-transition x-text="ad.desc"></div>
              </div>
            </template>
          </div>
          <div class="mt-4 flex items-center justify-end gap-2">
            <button @click="addonsOpen=false" class="rounded-lg ring-1 ring-slate-200 px-4 py-2 bg-white f-ring">Close</button>
            <button @click="addonsOpen=false; openBuilder()" class="rounded-lg bg-slate-900 text-white px-4 py-2 font-semibold f-ring">Review & Checkout</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Builder (Review) -->
  <div x-show="builderOpen" x-transition.opacity class="fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4">
    <div @click="builderOpen=false" class="absolute inset-0 bg-slate-900/50"></div>
    <div class="relative w-full sm:max-w-6xl rounded-2xl bg-white text-slate-900 shadow-2xl ring-1 ring-slate-200 max-h:[92vh] overflow-hidden">
      <div class="p-5 border-b border-slate-200 flex items-center justify-between">
        <h3 class="text-lg font-bold">Review & Checkout</h3>
        <button @click="builderOpen=false" class="h-9 w-9 grid place-items-center rounded-md hover:bg-slate-50 f-ring" aria-label="Close"><svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 6l12 12M6 18L18 6"/></svg></button>
      </div>
      <div class="p-5 grid lg:grid-cols-3 gap-6 overflow-auto max-h-[calc(92vh-72px)]">
        <!-- Left: choose bases -->
        <div class="lg:col-span-1 rounded-2xl bg-white ring-1 ring-slate-200 p-4">
          <h4 class="font-semibold">1) Base services</h4>
          <p class="text-xs text-slate-500 mt-1">Pick at least one base to continue.</p>
          <div class="mt-2 grid grid-cols-2 gap-2">
            <template x-for="s in services" :key="'pick-'+s.key">
              <button @click="toggleService(s.key)" class="tap rounded-xl px-3 py-2 font-semibold ring-1 ring-slate-200 flex items-center justify-center gap-2 f-ring" :class="cartServices.includes(s.key) ? 'bg-slate-900 text-white' : 'bg-white text-slate-700 hover:bg-slate-50'">
                <span class="h-2.5 w-2.5 rounded-full" :class="cartServices.includes(s.key)?'bg-emerald-400':'bg-slate-300'"></span>
                <span x-text="s.name"></span>
              </button>
            </template>
          </div>
        </div>

        <!-- Middle: add-ons -->
        <div class="lg:col-span-2 rounded-2xl bg-white ring-1 ring-slate-200 p-4">
          <div class="flex items-center justify-between gap-3 flex-wrap">
            <h4 class="font-semibold">2) Add-ons (optional)</h4>
            <div class="flex items-center gap-2">
              <select x-model="activeService" class="rounded-lg bg-white ring-1 ring-slate-200 px-2 py-1 text-sm f-ring">
                <template x-for="s in services" :key="'sel2-'+s.key"><option :value="s.key" x-text="s.name"></option></template>
              </select>
              <input x-model.trim="addonQuery" placeholder="Search add-ons" class="rounded-lg bg-white ring-1 ring-slate-200 px-2 py-1 text-sm f-ring" />
            </div>
          </div>
          <div class="mt-3 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 max-h-[28rem] overflow-auto pr-1">
            <template x-for="ad in visibleAddons" :key="'ad-'+ad.id">
              <button @click="toggleAddon(ad.id)" class="tap text-left rounded-xl p-4 ring-1 ring-slate-200 bg-white hover:bg-slate-50 transition relative f-ring" :class="cartAddons.includes(ad.id)?'bg-gradient-to-br from-indigo-50 to-cyan-50 ring-2 ring-indigo-300':''">
                <div class="flex items-start justify-between gap-3">
                  <div>
                    <div class="font-medium leading-tight" x-text="ad.label"></div>
                    <div class="text-xs mt-0.5 inline-flex items-center gap-2">
                      <span class="rounded-full bg-slate-100 ring-1 ring-slate-200 px-2 py-0.5 text-[10px] uppercase tracking-wide" x-text="ad.badge"></span>
                      <span class="text-slate-500" x-text="ad.short || ''"></span>
                    </div>
                  </div>
                  <div class="text-sm font-semibold whitespace-nowrap" x-text="fmtUSD(ad.price[plan])"></div>
                </div>
                <div x-show="cartAddons.includes(ad.id)" class="absolute top-2 right-2 h-6 w-6 rounded-full grid place-items-center bg-white text-indigo-600 ring-1 ring-indigo-200"><svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12l5 5L19 7"/></svg></div>
                <div class="mt-2 text-xs text-slate-500" x-text="ad.desc"></div>
              </button>
            </template>
          </div>
        </div>

        <!-- Summary + Contact -->
        <div class="lg:col-span-3 rounded-2xl bg-white ring-1 ring-slate-200 p-4">
          <h4 class="font-semibold">Summary</h4>
          <div class="mt-3 grid md:grid-cols-2 gap-4">
            <div>
              <div class="text-xs text-slate-500">Base services</div>
              <template x-if="cartServices.length===0"><div class="text-sm text-slate-500">None selected</div></template>
              <template x-for="k in cartServices" :key="'sum-base-'+k">
                <div class="mt-2 flex items-center justify-between rounded-lg bg-slate-50 ring-1 ring-slate-200 p-3">
                  <div class="text-sm font-semibold" x-text="serviceName(k)"></div>
                  <div class="text-sm font-semibold" x-text="fmtUSD(serviceBase(k))"></div>
                </div>
              </template>
            </div>
            <div>
              <div class="text-xs text-slate-500">Add-ons</div>
              <template x-if="cartAddons.length===0"><div class="text-sm text-slate-500">None selected</div></template>
              <template x-for="id in cartAddons" :key="'sum-addon-'+id">
                <div class="mt-2 flex items-center justify-between rounded-lg bg-slate-50 ring-1 ring-slate-200 p-3">
                  <div class="text-sm"><span class="font-medium" x-text="addonIndex[id].label"></span> <span class="text-slate-500">— <span x-text="serviceName(addonIndex[id].service)"></span></span></div>
                  <div class="text-sm font-semibold" x-text="fmtUSD(addonIndex[id].price[plan])"></div>
                </div>
              </template>
            </div>
          </div>

          <!-- Contact block -->
          <div class="mt-5 grid md:grid-cols-5 gap-3">
            <div class="md:col-span-2">
              <label class="text-xs text-slate-500">Name</label>
              <input x-model.trim="contact.name" placeholder="Jane Smith" class="mt-1 w-full rounded-lg bg-white ring-1 ring-slate-200 px-3 py-2 text-sm f-ring"/>
            </div>
            <div class="md:col-span-2">
              <label class="text-xs text-slate-500">Email <span class="text-rose-500">*</span></label>
              <input x-model.trim="contact.email" type="email" placeholder="you@example.com" class="mt-1 w-full rounded-lg bg-white ring-1 ring-slate-200 px-3 py-2 text-sm f-ring"/>
            </div>
            <div class="">
              <label class="text-xs text-slate-500">Phone</label>
              <input x-model.trim="contact.phone" placeholder="(555) 555-5555" class="mt-1 w-full rounded-lg bg-white ring-1 ring-slate-200 px-3 py-2 text-sm f-ring"/>
            </div>
            <div class="md:col-span-2">
              <label class="text-xs text-slate-500">Company</label>
              <input x-model.trim="contact.company" placeholder="Your company" class="mt-1 w-full rounded-lg bg-white ring-1 ring-slate-200 px-3 py-2 text-sm f-ring"/>
            </div>
            <div class="md:col-span-3">
              <label class="text-xs text-slate-500">Notes</label>
              <input x-model.trim="contact.notes" placeholder="Anything we should know for kickoff?" class="mt-1 w-full rounded-lg bg-white ring-1 ring-slate-200 px-3 py-2 text-sm f-ring"/>
            </div>
          </div>

          <div class="mt-4 flex items-center justify-between border-t border-slate-200 pt-3">
            <div class="text-sm text-slate-600">Estimated total <span x-show="plan==='monthly'">(per month)</span></div>
            <div class="text-lg font-extrabold" x-text="fmtUSD(total)"></div>
          </div>
          <div class="mt-3 flex flex-wrap justify-end gap-2">
            <button @click="clearAll()" class="rounded-lg ring-1 ring-slate-200 px-4 py-2 bg-white f-ring" :disabled="isSubmitting">Clear All</button>
            <button @click="beginCheckout()" class="rounded-lg bg-slate-900 text-white px-4 py-2 font-semibold f-ring inline-flex items-center gap-2" :disabled="isSubmitting">
              <span x-show="!isSubmitting">Continue to Secure Checkout</span>
              <span x-show="isSubmitting" class="inline-flex items-center gap-2"><span class="spinner"></span> Processing…</span>
            </button>
          </div>
          <p class="mt-2 text-[11px] text-slate-500">By continuing you agree to simple scope for one-time projects or a 3-month minimum for monthly plans.</p>
        </div>
      </div>
    </div>
  </div>

  <footer class="py-10 text-center text-[11px] text-slate-500">SECURE CHECKOUT WITH STRIPE • NO PUSHY SALES — CLEAR PRICING</footer>

  <!-- Scripts -->
  <script>
    function landingApp(){
      return {
        // --- State ---
        year: new Date().getFullYear(),
        plan: 'oneTime',
        addonQuery: '',
        sortBy: 'popular',
        services: [
          { key:'web', name:'Web & App', blurb:'Launch a clean, mobile-first site fast.', base:{oneTime:300, monthly:500}, includes:['Kickoff & setup','Landing page (3–5 sections)','Light copy help'], addOns:[
            { id:'web-seo', label:'SEO Basics', desc:'Titles, speed checks, findable.', short:'Quick search wins', price:{oneTime:150, monthly:150}, badge:'Quick win', popular:true },
            { id:'web-auto', label:'Lead Automations', desc:'Instant replies to leads.', short:'Never miss a lead', price:{oneTime:100, monthly:100}, badge:'Hands-off', popular:true },
            { id:'web-api', label:'Payments & Maps', desc:'Stripe checkout + maps.', short:'High-impact add', price:{oneTime:250, monthly:250}, badge:'High impact' },
            { id:'web-mvp', label:'Clickable MVP', desc:'Tap-through prototype.', short:'Test ideas', price:{oneTime:500, monthly:500}, badge:'Prototype' },
            { id:'web-copy', label:'Website Copywriting', desc:'We write clear, on-brand copy.', short:'Words that sell', price:{oneTime:120, monthly:120}, badge:'Done-for-you' },
            { id:'web-speed', label:'Speed & Security', desc:'Performance boosts + hardening.', short:'Faster & safer', price:{oneTime:150, monthly:150}, badge:'Speed' },
            { id:'web-forms', label:'Smart Forms', desc:'Lead routing + spam block.', short:'Higher conversions', price:{oneTime:150, monthly:100}, badge:'Leads' },
            { id:'web-analytics', label:'Analytics Setup', desc:'Simple dashboard + goals.', short:'Know what works', price:{oneTime:100, monthly:120}, badge:'Insight' },
            { id:'web-blog', label:'Blog/CMS Setup', desc:'Easy updates, categories, tags.', short:'Publish fast', price:{oneTime:200, monthly:150}, badge:'Content' },
            { id:'web-booking', label:'Booking Integration', desc:'Calendly/Square appointments.', short:'Fewer no-shows', price:{oneTime:150, monthly:120}, badge:'Conversion' },
            { id:'web-reviews', label:'Reviews Widget', desc:'Pull Google/FB reviews on site.', short:'Build trust', price:{oneTime:100, monthly:100}, badge:'Trust' },
            { id:'web-a11y', label:'Accessibility Audit', desc:'WCAG quick audit + fixes.', short:'Compliance wins', price:{oneTime:180, monthly:150}, badge:'Compliance' },
            { id:'web-i18n', label:'Multi-language', desc:'Key pages in 2nd language.', short:'Expand reach', price:{oneTime:220, monthly:150}, badge:'Reach' },
            { id:'web-dns', label:'Domain & DNS', desc:'Purchase, connect, SSL.', short:'We handle setup', price:{oneTime:80, monthly:0}, badge:'Setup' },
            { id:'web-section', label:'Custom Section', desc:'1 bespoke section block.', short:'Tailored UI', price:{oneTime:120, monthly:120}, badge:'Custom' },
            { id:'web-photos', label:'Photo Sourcing', desc:'Handpicked stock + edits.', short:'Better visuals', price:{oneTime:90, monthly:90}, badge:'Visuals' },
            { id:'web-brandkit', label:'Brand Kit', desc:'Fonts, colors, components.', short:'Consistent look', price:{oneTime:200, monthly:150}, badge:'Brand' },
          ]},
          { key:'video', name:'Video / Audio', blurb:'Short, on-brand edits that convert.', base:{oneTime:600, monthly:1200}, includes:['Kickoff & plan','1–2 min edit','Clean edit, coastal vibe'], addOns:[
            { id:'vid-audio', label:'Clean Audio + Captions', desc:'Noise fix + captions.', short:'Watchable anywhere', price:{oneTime:200, monthly:250}, badge:'Accessibility', popular:true },
            { id:'vid-adv', label:'Advanced Edit / Series', desc:'More story, motion, polish.', short:'Flagship content', price:{oneTime:800, monthly:1000}, badge:'Premium', popular:true },
            { id:'vid-drone-p', label:'Drone B-roll (Basic)', desc:'Dynamic aerial flavor.', short:'Wow factor', price:{oneTime:300, monthly:300}, badge:'Wow' },
            { id:'vid-drone-pro', label:'Drone Cinematics (Pro)', desc:'Licensed pilot + pro gear.', short:'Top-tier aerials', price:{oneTime:1500, monthly:1500}, badge:'Cinematic' },
            { id:'vid-extra', label:'Extra Edit Pass', desc:'More refinements + cuts.', short:'Sharper pacing', price:{oneTime:300, monthly:500}, badge:'Polish' },
            { id:'vid-script', label:'Script & Shotlist', desc:'Plan lines + shots.', short:'Shoot with ease', price:{oneTime:150, monthly:150}, badge:'Plan' },
            { id:'vid-color', label:'Pro Color Grade', desc:'Crisp, cinematic look.', short:'Standout look', price:{oneTime:150, monthly:150}, badge:'Look' },
            { id:'vid-sizes', label:'All Social Sizes', desc:'9:16, 1:1, 16:9 outputs.', short:'Every platform', price:{oneTime:120, monthly:120}, badge:'Everywhere' },
            { id:'vid-thumbs', label:'Thumbnail Pack (x3)', desc:'Scroll-stopping covers.', short:'Higher CTR', price:{oneTime:100, monthly:100}, badge:'Hook' },
            { id:'vid-raw', label:'Raw Footage Delivery', desc:'We hand you the files.', short:'Own the source', price:{oneTime:60, monthly:60}, badge:'Archive' },
            { id:'vid-voice', label:'Voiceover', desc:'Pro VO talent included.', short:'Narration', price:{oneTime:220, monthly:220}, badge:'Pro' },
            { id:'vid-tele', label:'Teleprompter', desc:'Confident on-camera lines.', short:'Confidence', price:{oneTime:90, monthly:90}, badge:'Assist' },
            { id:'vid-studio', label:'Studio Day', desc:'Lighting, backdrops, sound.', short:'Controlled set', price:{oneTime:700, monthly:700}, badge:'Studio' },
            { id:'vid-multi', label:'Multi-location Shoot', desc:'Up to 3 locations.', short:'More variety', price:{oneTime:400, monthly:400}, badge:'Scope' },
            { id:'vid-cast', label:'Talent Casting', desc:'Find on-brand talent.', short:'Right faces', price:{oneTime:300, monthly:300}, badge:'Talent' },
          ]},
          { key:'events', name:'Events', blurb:'Plan smooth, run tight, look great.', base:{oneTime:1000, monthly:1200}, includes:['Scope & timeline','Basic coordination','Day-of support'], addOns:[
            { id:'ev-ven', label:'Vendor/Venue Handling', desc:'We wrangle calls.', short:'Stress-free', price:{oneTime:500, monthly:600}, badge:'Stress-free', popular:true },
            { id:'ev-digital', label:'RSVP/Tickets Page', desc:'Modern guest flow.', short:'Smooth RSVPs', price:{oneTime:200, monthly:200}, badge:'Modern' },
            { id:'ev-media', label:'Highlight Media', desc:'Recap video + photos.', short:'Shareworthy', price:{oneTime:300, monthly:300}, badge:'Content' },
            { id:'ev-auto', label:'Guest Automations', desc:'Reminders + check-in.', short:'No bottlenecks', price:{oneTime:150, monthly:150}, badge:'Smooth' },
            { id:'ev-hybrid', label:'Livestream Setup', desc:'Hybrid reach, simple.', short:'Reach more', price:{oneTime:400, monthly:400}, badge:'Reach' },
            { id:'ev-host', label:'Host / MC', desc:'Energy + timing control.', short:'Keep pace', price:{oneTime:250, monthly:250}, badge:'Energy' },
            { id:'ev-runshow', label:'Run-of-Show', desc:'Minute-by-minute plan.', short:'Clarity', price:{oneTime:150, monthly:150}, badge:'Clarity' },
            { id:'ev-sponsor', label:'Sponsor Kit + Outreach', desc:'Deck + outreach.', short:'New revenue', price:{oneTime:200, monthly:200}, badge:'Revenue' },
            { id:'ev-security', label:'Permits & Security Guide', desc:'Who to call + when.', short:'Safer event', price:{oneTime:120, monthly:120}, badge:'Safety' },
            { id:'ev-vip', label:'VIP/Backstage Mgmt', desc:'Green room + access.', short:'White-glove', price:{oneTime:200, monthly:200}, badge:'VIP' },
            { id:'ev-photobooth', label:'Photo Booth', desc:'Branded photos on site.', short:'Fun moments', price:{oneTime:350, monthly:350}, badge:'Fun' },
            { id:'ev-ticketing', label:'Ticketing Integration', desc:'Stripe/Square, QR.', short:'Faster gates', price:{oneTime:220, monthly:220}, badge:'Revenue' },
          ]},
          { key:'ugc', name:'UGC', blurb:'Creators + clips that actually get seen.', base:{oneTime:450, monthly:600}, includes:['Kickoff & setup','30k verified views','Simple report'], addOns:[
            { id:'ugc-repurpose', label:'Ads-Ready Pack', desc:'Cut-downs + hooks.', short:'Convert more', price:{oneTime:200, monthly:200}, badge:'Ads-ready', popular:true },
            { id:'ugc-leads', label:'Lead Capture Page', desc:'Turn views to contacts.', short:'Capture demand', price:{oneTime:250, monthly:250}, badge:'Leads' },
            { id:'ugc-enhance', label:'Eye-Candy Overlays', desc:'On-brand text, beats.', short:'More watch time', price:{oneTime:150, monthly:150}, badge:'Engaging' },
            { id:'ugc-captions', label:'SEO Captions', desc:'Be found & tapped.', short:'Search hits', price:{oneTime:100, monthly:100}, badge:'Search' },
            { id:'ugc-brand', label:'Branding Pack', desc:'Logos, end-slates.', short:'Brand recall', price:{oneTime:150, monthly:150}, badge:'Brand' },
            { id:'ugc-views-10k', label:'+10k Views', desc:'~10,000 verified views.', short:'+10k reach', price:{oneTime:150, monthly:150}, badge:'+10k' },
            { id:'ugc-views-20k', label:'+20k Views', desc:'~20,000 verified views.', short:'+20k reach', price:{oneTime:300, monthly:300}, badge:'+20k' },
            { id:'ugc-views-70k', label:'+70k Views', desc:'~70,000 verified views.', short:'+70k reach', price:{oneTime:1050, monthly:1050}, badge:'+70k' },
            { id:'ugc-creator', label:'Creator Matching', desc:'Shortlist best locals.', short:'Best fit', price:{oneTime:100, monthly:100}, badge:'Match' },
            { id:'ugc-studio', label:'Studio Polish', desc:'Re-cut with pro touch.', short:'Pro finish', price:{oneTime:150, monthly:150}, badge:'Pro' },
            { id:'ugc-comment', label:'Comment Reply Pack', desc:'Smart replies to boost.', short:'Engage more', price:{oneTime:100, monthly:100}, badge:'Engage' },
            { id:'ugc-tracking', label:'Tracking Upgrade', desc:'Deeper insights.', short:'Better decisions', price:{oneTime:120, monthly:120}, badge:'Insight' },
            { id:'ugc-white', label:'Whitelisting Rights', desc:'Run creator posts as ads.', short:'Run as ads', price:{oneTime:220, monthly:220}, badge:'Rights' },
            { id:'ugc-usage', label:'Usage Rights Extension', desc:'Extend paid usage.', short:'More time', price:{oneTime:180, monthly:180}, badge:'Rights' },
            { id:'ugc-hooks', label:'A/B Hooks Pack', desc:'5 alt hooks to test.', short:'Test faster', price:{oneTime:140, monthly:140}, badge:'Test' },
          ]},
        ],
        addonIndex: {},
        openDescs: {},
        cartServices: [],
        cartAddons: [],
        builderOpen: false,
        addonsOpen: false,
        activeService: 'web',
        stickyCta: false,
        toast: { show:false, text:'' },
        isSubmitting:false,
        contact:{ name:'', email:'', company:'', phone:'', notes:'' },

        // --- Init ---
        init(){
          // Build add-on index
          this.addonIndex = this.services.reduce((acc, svc) => {
            svc.addOns.forEach(a => acc[a.id] = { ...a, service: svc.key });
            return acc;
          }, {});
          // Restore cart from localStorage
          try{
            const saved = JSON.parse(localStorage.getItem('coast_cart')||'{}');
            if(saved.services) this.cartServices = saved.services;
            if(saved.addons) this.cartAddons = saved.addons;
            if(saved.plan) this.plan = saved.plan;
            if(saved.contact) this.contact = {...this.contact, ...saved.contact};
          }catch{}
          // Sticky CTA
          const onScroll = () => { this.stickyCta = window.scrollY > 640 };
          onScroll(); window.addEventListener('scroll', onScroll);
        },

        // --- Computeds ---
        get total(){
          const baseSum = this.cartServices.reduce((s, key) => s + (this.services.find(x => x.key === key)?.base?.[this.plan] || 0), 0);
          const addonSum = this.cartAddons.reduce((s, id) => s + (this.addonIndex[id]?.price?.[this.plan] || 0), 0);
          return baseSum + addonSum;
        },
        get visibleAddons(){
          let items = this.addonsFor(this.activeService).slice();
          const q = this.addonQuery.trim().toLowerCase();
          if(q) items = items.filter(a => a.label.toLowerCase().includes(q) || a.desc.toLowerCase().includes(q) || (a.short||'').toLowerCase().includes(q));
          if(this.sortBy==='price-asc') items.sort((a,b)=>a.price[this.plan]-b.price[this.plan]);
          else if(this.sortBy==='price-desc') items.sort((a,b)=>b.price[this.plan]-a.price[this.plan]);
          else if(this.sortBy==='alpha') items.sort((a,b)=>a.label.localeCompare(b.label));
          else items.sort((a,b)=> (b.popular?1:0) - (a.popular?1:0));
          return items;
        },

        // --- Helpers ---
        addonsFor(key){ return (this.services.find(s => s.key === key) || {}).addOns || []; },
        serviceName(key){ return (this.services.find(s => s.key === key) || {}).name || key; },
        serviceBase(key){ return (this.services.find(s => s.key === key) || {}).base?.[this.plan] || 0; },
        fmtUSD(v){ return new Intl.NumberFormat('en-US',{style:'currency',currency:'USD',maximumFractionDigits:0}).format(v); },
        save(){ localStorage.setItem('coast_cart', JSON.stringify({ services:this.cartServices, addons:this.cartAddons, plan:this.plan, contact:this.contact })); },
        emailValid(e){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e||''); },

        // --- UI Actions ---
        setPlan(p){ this.plan = p; this.save(); },
        toggleService(key){ const i = this.cartServices.indexOf(key); if(i>-1) this.cartServices.splice(i,1); else this.cartServices.push(key); this.save(); this.flash('Updated base services'); },
        toggleAddon(id){
          // If adding an add-on for a service that has no base selected, nudge user
          const svcKey = this.addonIndex[id]?.service;
          if(!this.cartServices.includes(svcKey)){
            this.flash(`Add the “${this.serviceName(svcKey)}” base to include this add-on.`);
          }
          const i = this.cartAddons.indexOf(id);
          if(i>-1) { this.cartAddons.splice(i,1); this.flash('Removed add-on'); }
          else { this.cartAddons.push(id); this.flash('Added add-on'); }
          this.save();
        },
        toggleDesc(id){ this.$set(this.openDescs, id, !this.openDescs[id]); },
        quickPick(kind){
          const maps = {
            essentials: { web:['web-seo','web-auto'], video:['vid-audio','vid-sizes'], events:['ev-digital','ev-media'], ugc:['ugc-captions','ugc-enhance'] },
            premium:    { web:['web-mvp','web-api','web-copy'], video:['vid-adv','vid-drone-p'], events:['ev-ven','ev-hybrid'], ugc:['ugc-repurpose','ugc-leads','ugc-views-20k'] },
          };
          const add = maps[kind]?.[this.activeService] || [];
          for(const id of add){ if(!this.cartAddons.includes(id)) this.cartAddons.push(id); }
          this.save(); this.flash('Quick picks added');
        },
        openAddons(key){ this.activeService = key || 'web'; this.addonsOpen = true; },
        openBuilder(){ this.builderOpen = true; },
        clearAll(){ this.cartServices = []; this.cartAddons = []; this.save(); this.flash('Cleared cart'); },
        flash(text){ this.toast.text = text; this.toast.show = true; setTimeout(()=> this.toast.show=false, 1400); },

        // --- Checkout (server returns { url }) ---
        async beginCheckout(){
          try{
            if(this.isSubmitting) return;
            // Require at least one base
            if(!this.cartServices.length){ this.flash('Please add at least one Base Service to continue.'); return; }
            // Email required
            if(!this.emailValid(this.contact.email)){ this.flash('Enter a valid email for receipt & updates.'); return; }

            // Ensure no orphan add-ons (add-ons for services without base)
            const orphan = this.cartAddons.find(id => !this.cartServices.includes(this.addonIndex[id]?.service));
            if(orphan){
              const svcName = this.serviceName(this.addonIndex[orphan].service);
              this.flash(`Add the “${svcName}” base to include its add-ons, or remove those add-ons.`);
              return;
            }

            // Build cart for API: one entry per selected base service
            const cart = this.cartServices.map(svcKey => {
              const svc = this.services.find(s => s.key === svcKey);
              const base = svc?.base?.[this.plan] || 0;
              const addons = this.cartAddons
                .filter(id => this.addonIndex[id]?.service === svcKey)
                .map(id => ({ id, name: this.addonIndex[id].label, price: this.addonIndex[id].price[this.plan] }));
              return {
                service: svcKey,
                base,
                addons,
                notes: '' // you can pipe this.contact.notes per-service if you want
              };
            });

            this.isSubmitting = true;

            const res = await fetch('/api/checkout', {
              method:'POST',
              headers:{ 'Content-Type':'application/json' },
              body: JSON.stringify({
                plan: this.plan,
                cart,
                contact: { ...this.contact }
              })
            });

            if(!res.ok){
              const out = await res.json().catch(()=>({}));
              throw new Error(out.error || 'Checkout could not start');
            }
            const { url } = await res.json();
            if(!url) throw new Error('No checkout URL returned');
            window.location = url; // Stripe-hosted checkout
          }catch(e){
            console.error(e);
            this.flash(e.message || 'Checkout failed. Email 1coastmedia@gmail.com for help.');
            this.isSubmitting = false;
          }
        },
      }
    }
  </script>
</body>
</html>
